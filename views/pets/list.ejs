<!-- views/pets/list.ejs -->
<%- include('../partials/header', { title: 'My Pets' }) %>

<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>My Pets</h2>
  <a href="/pets/new" class="btn btn-success">+ Add Pet</a>
</div>

<% if (pets.length === 0) { %>
  <p>No pets yet. Go add your first one ðŸ‘‡</p>
  <a href="/pets/new" class="btn btn-primary">Add Pet</a>
<% } else { %>
  <div class="table-responsive">
    <table class="table table-dark table-striped align-middle">
      <thead>
        <tr>
          <th>Name</th>
          <th>Species</th>
          <th>Breed</th>
          <th>Colour</th>
          <th>Gender</th>
          <th>Age</th>
          <th>Weight</th>
          <th>Vaccination</th>
          <th>Vet</th>
          <th>Next Appointment</th>
          <th>Notes</th>
          <th style="width: 150px;">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% pets.forEach(pet => { %>
          <tr>
            <td><%= pet.name %></td>
            <td><%= pet.species %></td>
            <td><%= pet.breed || '-' %></td>
            <td><%= pet.color || '-' %></td>
            <td><%= pet.gender || '-' %></td>

            <!-- Age -->
            <td>
              <% if (pet.ageValue != null) { %>
                <%= pet.ageValue %> <%= pet.ageUnit || '' %>
              <% } else { %>
                -
              <% } %>
            </td>

            <!-- Weight -->
            <td>
              <% if (pet.weightValue != null) { %>
                <%= pet.weightValue %> <%= pet.weightUnit || '' %>
              <% } else { %>
                -
              <% } %>
            </td>

            <td><%= pet.vaccinationStatus || '-' %></td>
            <td><%= pet.vetName || '-' %></td>

            <td>
              <%= pet.nextAppointment ? pet.nextAppointment.toLocaleDateString() : '-' %>
            </td>

            <td><%= pet.notes || '-' %></td>

            <td>
              <a href="/pets/<%= pet._id %>/edit" class="btn btn-sm btn-warning mb-1">Edit</a>
              <a href="/pets/<%= pet._id %>/delete" class="btn btn-sm btn-danger">Delete</a>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
<% } %>

<%- include('../partials/footer') %>n